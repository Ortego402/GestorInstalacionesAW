<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Configuración del documento -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Enlaces a archivos de estilo externos -->
    <link rel="stylesheet" type="text/css" href="../css/nav.css">
    <link rel="stylesheet" type="text/css" href="../css/home.css">
    <!-- Enlaces a bibliotecas de Bootstrap y Bootstrap Icons desde un CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <!-- Título de la página y favicon -->
    <title>UCM | Lista de Usuarios</title>
    <link rel="icon" href="../images/icon.png" type="image/x-icon">
</head>
<body>
    <!-- Inclusión del encabezado y la barra de navegación -->
    <%- include('header.ejs') %>
    <%- include('nav.ejs') %>         

    <!-- Contenido principal -->
    <main class="p-3">
        <div class="container">
            <h2 class="mb-3">Lista de Usuarios</h2>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Nombre</th>
                        <th>Primer Apellido</th>
                        <th>Segundo Apellido</th>
                        <th>Correo Electrónico</th>
                        <th>Facultad</th>
                        <th>Curso</th>
                        <th>Grupo</th>
                        <th>Rol</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <% results.forEach(function(user) { %>
                        <% if (user.Id !== session.Id) { %>
                            <tr>
                                <!-- Celdas de la tabla -->
                                <td><%= user.Id %></td>
                                <td><%= user.nombre %></td>
                                <td><%= user.apellido1 %></td>
                                <td><%= user.apellido2 %></td>
                                <td><%= user.email %></td>
                                <td><%= user.facultad %></td>
                                <td><%= user.curso %></td>
                                <td><%= user.grupo %></td>
                                <td><% if (user.rol == '1') { %>ADMIN<% } else { %>USUARIO<% } %></td>
                                <td>
                                    <a href="/cambiarRol/<%= user.Id %>" class="btn btn-sm btn-dark">Cambiar Rol</a>
                                </td>
                            </tr>
                        <% } %>
                    <% }); %>
                </tbody>
            </table>
        </div>
    </main>

    <!-- Inclusión del pie de página -->
    <%- include('footer.ejs') %>
</body>
</html>
